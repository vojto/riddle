\section{Konceptuálny dátovı model}

\subsection{Popis základnıch entít}

\paragraph{Teacher} ~~~~~\\
 Entita Teacher reprezentuje pouívate¾a. Predpokladá sa uèite¾, ktorı je v systéme registrovanı a prihlásenı.
Pri registrácii sa vyplnia poloky name, fullname, password. Pre administrátora je urèená poloka superuser.

\paragraph{Student} ~~~~~\\
Entita Student je jednou z k¾úèovıch entít, pretoe uchováva dáta o pouívate¾och, ktorí navštívili danú anketu.
Klient sa identifikuje vo forme session id. Študent môe ma priradené svoje meno, ale nemusí. Z toho vyplıva, e hlasovanie môe by do istej formy anonymné.

\paragraph{Category}  ~~~~~\\
 Entita Category reprezentuje rozdelenie dotazníkov do jednotlivıch skupín/kategórií pre lepšiu správu a preh¾adnos. 
Kategórie sú rozdelené pod¾a názvu a prístup k nim má prihlásenı pouívate¾.

\paragraph{Questionnaire} ~~~~~\\
Entita Questionnaire reprezentuje dané dotazníky, ktoré sa nachádzajú v kategóriach. Obsahujú názov a public id, ktoré je potrebné pri zobrazení daného dotazníka študentom.

\paragraph{Question} ~~~~~\\
Entita Question reprezentuje dané otázky v systéme. Questionnaire môe obsahova viacero otázok.
Medzi prvky, z ktorıch pozostáva Question, patrí hlavne typ otázky. Tento typ môe by single, multi alebo text.
Pri single môe by oznaèená jedna odpoveï, pri multi môe by oznaèenıch viacero odpovedí a pri text je poadovaná odpoveï v textovej forme.
Ïalej monos presented znaèí, èi u bola anketa publikovaná alebo nie. 

\paragraph{Comment} ~~~~~\\
Entita Comment reprezentuje komentár k danému Questionnaire. Cie¾ jej pouitia je podpora spätnej väzby. 
Pozostáva z mena (prezıvky) autora, nadpisu, tela, kde bude umiestnené samotné jadro komentára, a nakoniec èasu a dátumu odoslania.

\paragraph{Option} ~~~~~\\
Entita Option obsahuje text konkrétnej otázky. Vzahuje sa na entitu Question. Pre kadú monos je vytvorená textová reprezentácia.

\paragraph{Answer} ~~~~~\\
Entita Answer sa vzahuje na entitu Question a entitu Student. Úlohou je zaznamena, e bola prijatá konkrétna odpoveï na otázku. 

\paragraph{Rating} ~~~~~\\
Entita Rating sa vzahuje na entitu Questionnaire a entitu Student a poskytuje pouívate¾om (študentom) monos vyjardri svoju spokojnos s danım dotazníkom tım, e mu dajú like alebo dislike. Vïaka tejto entite sa následne zobrazí úroveò spokojnosti s dotazníkom.

\paragraph{Student presence} ~~~~~\\
co to robi ?????
~~~~~

\subsection{Logickı dátovı model}
\includegraphics[scale=0.65]{pics/LogickyFinal.png}
\subsection{Fyzickı dátovı model}
\includegraphics[scale=0.65]{pics/FyzickyFinal.png}

\subsection{Databázovı skript}
CREATE TABLE ’’answer’’
CREATE TABLE ’’answer’’ (’’id’’ INTEGER NOT NULL PRIMARY KEY, ’’text’’ TEXT, ’’option\_id’’ INTEGER NOT NULL REFERENCES ’’option’’ (’’id’’) , ’’student\_id’’ INTEGER NOT NULL REFERENCES ’’student’’ (’’id’’) ); 

CREATE TABLE ’’category’’ (’’id’’ INTEGER NOT NULL PRIMARY KEY, ’’name’’ VARCHAR(255) NOT NULL, ’’teacher\_id’’ INTEGER NOT NULL REFERENCES ’’teacher’’ (’’id’’) ); 

CREATE TABLE ’’comment’’ (’’id’’ INTEGER NOT NULL PRIMARY KEY, ’’author’’ VARCHAR(255) NOT NULL, ’’subject’’ VARCHAR(255) NOT NULL, ’’body’’ TEXT NOT NULL, ’’questionnaire\_id’’ INTEGER NOT NULL REFERENCES ’’questionnaire’’ (’’id’’) , ’’datetime’’ DATETIME NOT NULL); 

CREATE TABLE ’’option’’ (’’id’’ INTEGER NOT NULL PRIMARY KEY, ’’text’’ TEXT NOT NULL, ’’question\_id’’ INTEGER NOT NULL REFERENCES ’’question’’ (’’id’’) ); 

CREATE TABLE ’’question’’ (’’id’’ INTEGER NOT NULL PRIMARY KEY, ’’description’’ TEXT NOT NULL, ’’typ’’ INTEGER NOT NULL, ’’presented’’ SMALLINT NOT NULL, ’’questionnaire\_id’’ INTEGER NOT NULL REFERENCES ’’questionnaire’’ (’’id’’) ); 

CREATE TABLE ’’questionnaire’’ (’’id’’ INTEGER NOT NULL PRIMARY KEY, ’’name’’ VARCHAR(255) NOT NULL, ’’public\_id’’ VARCHAR(255) NOT NULL, ’’category\_id’’ INTEGER NOT NULL REFERENCES ’’category’’ (’’id’’) ); 

CREATE TABLE ’’rating’’ (’’id’’ INTEGER NOT NULL PRIMARY KEY, ’’like’’ SMALLINT NOT NULL, ’’questionnaire\_id’’ INTEGER NOT NULL REFERENCES ’’questionnaire’’ (’’id’’) ); 

CREATE TABLE ’’student’’ (’’id’’ INTEGER NOT NULL PRIMARY KEY, ’’name’’ VARCHAR(255) NOT NULL, ’’session\_id’’ VARCHAR(255) NOT NULL); 

CREATE TABLE ’’teacher’’ (’’id’’ INTEGER NOT NULL PRIMARY KEY, ’’username’’ VARCHAR(255) NOT NULL, ’’fullname’’ VARCHAR(255) NOT NULL, ’’email’’ VARCHAR(255) NOT NULL, ’’password’’ VARCHAR(255) NOT NULL, ’’active’’ SMALLINT NOT NULL, ’’superuser’’ SMALLINT NOT NULL);

CREATE INDEX ’’answer\_option\_id’’ ON ’’answer’’ (’’option\_id’’);

CREATE INDEX ’’answer\_student\_id’’ ON ’’answer’’ (’’student\_id’’);

CREATE INDEX ’’category\_teacher\_id’’ ON ’’category’’ (’’teacher\_id’’);

CREATE INDEX ’’comment\_questionnaire\_id’’ ON ’’comment’’ (’’questionnaire\_id’’);

CREATE INDEX ’’option\_question\_id’’ ON ’’option’’ (’’question\_id’’);

CREATE INDEX ’’question\_questionnaire\_id’’ ON ’’question’’ (’’questionnaire\_id’’);

CREATE INDEX ’’questionnaire\_category\_id’’ ON ’’questionnaire’’ (’’category\_id’’);

CREATE INDEX ’’questionnaire\_name\_category\_id’’ ON ’’questionnaire’’ (’’name’’, ’’category\_id’’);

CREATE UNIQUE INDEX ’’questionnaire\_public\_id’’ ON ’’questionnaire’’ (’’public\_id’’);

CREATE INDEX ’’rating\_questionnaire\_id’’ ON ’’rating’’ (’’questionnaire\_id’’);
